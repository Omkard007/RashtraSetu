<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>RashtraSetu | Citizen Profile</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">

    <style>
        body {
            background: #0f1419;
            color: #e7e9ea;
            font-family: "Segoe UI", sans-serif;
            margin-left: 230px;
        }

        /* ===== Sidebar ===== */
        .sidebar {
            width: 230px;
            height: 100vh;
            background: #0A2647;
            color: #fff;
            padding-top: 20px;
            position: fixed;
            left: 0;
            top: 0;
        }

        .sidebar h3 {
            font-size: 22px;
            text-align: center;
            margin-bottom: 25px;
            color: #FFDE59;
        }

        .menu-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            font-size: 16px;
            text-decoration: none;
            color: white;
            border-radius: 6px;
        }

        .menu-item:hover {
            background: #144272;
        }

        /* LOGIN */
        .login-box {
            max-width: 420px;
            margin: 100px auto;
            background: #111;
            padding: 30px;
            border-radius: 15px;
        }

        /* PROFILE */
        .profile-wrapper {
            max-width: 1000px;
            margin: 40px auto;
            display: none;
        }

        .profile-card {
            background: #000;
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid #2f3336;
        }

        .profile-cover {
            height: 180px;
            background: linear-gradient(135deg, #0A2647, #144272);
        }

        .profile-pic {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            border: 5px solid #000;
            margin-top: -70px;
            margin-left: 30px;
            object-fit: cover;
        }

        .profile-body {
            padding: 20px 30px 30px
        }

        .profile-name {
            font-size: 24px;
            font-weight: 600
        }

        .edit-btn {
            background: #1d9bf0;
            border: none;
            color: #fff;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 14px;
        }

        /* Mobile */
        @media (max-width: 768px) {
            body {
                margin-left: 0;
            }

            .sidebar {
                position: relative;
                width: 100%;
                height: auto;
            }
        }
    </style>
</head>

<body>

    <!-- SIDEBAR -->
    <div class="sidebar">
        <h3>RashtraSetu</h3>
        <a href="#" class="menu-item">Home</a>
        <a href="#" class="menu-item">Profile</a>
        <a href="#" class="menu-item" onclick="logout()">Logout</a>
    </div>

    <!-- LOGIN -->
    <div class="login-box" id="loginBox">
        <h4 class="text-center mb-3">Citizen Login</h4>
        <input id="mobile" class="form-control mb-2" placeholder="Mobile Number">
        <input id="password" type="password" class="form-control mb-3" placeholder="Password">
        <button class="btn btn-primary w-100" onclick="login()">Login</button>
    </div>

    <!-- PROFILE -->
    <div class="profile-wrapper" id="profileWrapper">
        <div class="profile-card">
            <div class="profile-cover"></div>
            <img id="profilePic" class="profile-pic" src="https://via.placeholder.com/140">

            <div class="profile-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <div class="profile-name" id="viewName">Citizen Name</div>
                        <div class="text-secondary" id="viewWard">Ward</div>
                    </div>
                    <button class="edit-btn" data-bs-toggle="modal" data-bs-target="#editModal">
                        <i class="fa fa-pen"></i> Edit Profile
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- EDIT PROFILE MODAL -->
    <div class="modal fade" id="editModal">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-dark text-light">
                <div class="modal-header">
                    <h5>Edit Profile</h5>
                    <button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input id="editName" class="form-control mb-2" placeholder="Full Name">
                    <input id="editWard" class="form-control mb-2" placeholder="Ward">
                    <input type="file" class="form-control mb-3" accept="image/*" onchange="previewImage(event)">
                    <img id="preview" class="rounded-circle mb-3" style="width:100px;height:100px;object-fit:cover;">
                    <button class="btn btn-primary w-100" onclick="saveProfile()">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        const el = id => document.getElementById(id);

        function login() {
            const name = "Citizen Demo";
            const user = { name, ward: "Ward 12", photo: "https://via.placeholder.com/140" };
            localStorage.setItem("user", JSON.stringify(user));
            loadProfile();
        }

        function loadProfile() {
            const user = JSON.parse(localStorage.getItem("user"));
            if (!user) return;

            el("loginBox").style.display = "none";
            el("profileWrapper").style.display = "block";
            el("viewName").innerText = user.name;
            el("viewWard").innerText = user.ward;
            el("profilePic").src = user.photo;
        }

        function previewImage(e) {
            const reader = new FileReader();
            reader.onload = () => el("preview").src = reader.result;
            reader.readAsDataURL(e.target.files[0]);
        }

        function saveProfile() {
            const user = JSON.parse(localStorage.getItem("user"));
            user.name = el("editName").value || user.name;
            user.ward = el("editWard").value || user.ward;
            if (el("preview").src) user.photo = el("preview").src;
            localStorage.setItem("user", JSON.stringify(user));
            loadProfile();
            bootstrap.Modal.getInstance(el("editModal")).hide();
        }

        function logout() {
            localStorage.removeItem("user");
            location.reload();
        }

        window.onload = loadProfile;
    </script>

</body>
</html>
